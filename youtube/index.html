<!DOCTYPE html>
<html lang="JA">
<head>
  <title>ハロプロYouTubeリンク集</title>
  <meta charset="UTF8-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <style>
    .nowrap {
      white-space: nowrap;
    }
  </style>
</head>
<body style="padding-top:4.5rem;">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<div class="container">
  <nav class="navbar navbar-expand-sm bg-body-tertiary fixed-top navbar-light bg-light">
    <div class="container-fluid">
      <form id="form" class="d-flex">
        <input id="in_text" class="form-inline me-2" type="search" placeholder="キーワード"><button class="btn btn-primary" type="submit">検索</button>
      </form>
    </div>
  </nav>
  <table class="table">
    <thead>
      <tr><th class="nowrap">公開日</th><th class="nowrap">開始</th><th>タイトル</th></tr>
    </thead>
    <tbody id="tb_links"></tbody>
  </table>
  
</div>

<script>
         $(document).ready(function(){
          $("#in_text").focus();
         })
      $("#form").submit(function(event ) {
      var values = $("#in_text").val().toLowerCase().replace("　"," ").split(" ").filter(function(v){return v != ''});
      console.log(values);
      json = "./links.json";
      $("#tb_links tr").remove();
      $.getJSON(json, function(links,status){
        for(var i in links){
          var skip = false;
          if(values.length == 0){
            skip = true;
          }
          for(var j in values){
            if(
              links[i]["公開日"].toLowerCase().indexOf(values[j]) == -1 &&
              links[i]["時間"].toLowerCase().indexOf(values[j]) == -1 &&
              links[i]["タイトル"].toLowerCase().indexOf(values[j]) == -1
            ){
              skip = true;
            }
          }
          if(skip){
            continue;
          }
          var tr = document.createElement('tr'); 
          var td = document.createElement('td');
          td.textContent = links[i]["公開日"];
          td.className = "nowrap"
          tr.appendChild(td);

          var td = document.createElement('td');
          td.textContent = links[i]["時間"];
          td.attributes = "nowrap"
          tr.appendChild(td);

          var td = document.createElement('td');
          var a = document.createElement('a');
          a.href = links[i]["URL"];
          a.target = "_blank"
          a.textContent = links[i]["タイトル"];
          td.appendChild(a);
          tr.appendChild(td);
          document.getElementById("tb_links").appendChild(tr);
         }
      });
      event.preventDefault();
     });
</script>

</body>
</html>
